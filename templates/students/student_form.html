{% extends 'base.html' %}

{% block title %}Register Student - Jets Fees{% endblock %}
{% block page_title %}{% if form.instance.pk %}Edit Student{% else %}Register New Student{% endif %}{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div class="card"
        style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md);">
        <form method="post">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="alert error"
                style="margin-bottom: 1.5rem; padding: 1rem; background: #FEE2E2; color: #EF4444; border-radius: 4px;">
                {{ form.non_field_errors }}</div>
            {% endif %}

            <!-- Section: Personal Details -->
            <h3
                style="margin-bottom: 1.5rem; font-size: 1.1rem; color: var(--primary-color); display: flex; align-items: center; gap: 0.5rem;">
                <i class="ph ph-user"></i> Personal Details
            </h3>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">First
                        Name</label>
                    {{ form.first_name }}
                    {{ form.first_name.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Last
                        Name</label>
                    {{ form.last_name }}
                    {{ form.last_name.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Admission
                        Number</label>
                    {{ form.admission_number }}
                    {{ form.admission_number.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Date
                        of Birth</label>
                    {{ form.date_of_birth }}
                    {{ form.date_of_birth.errors }}
                </div>
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Class</label>
                    {{ form.current_class }}
                    {{ form.current_class.errors }}
                </div>
            </div>

            <!-- Section: Parent/Guardian Info -->
            <h3
                style="margin-bottom: 1.5rem; font-size: 1.1rem; color: var(--primary-color); display: flex; align-items: center; gap: 0.5rem; border-top: 1px solid var(--border-color); padding-top: 2rem;">
                <i class="ph ph-users"></i> Parent / Guardian Info
            </h3>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Phone
                        Number</label>
                    {{ form.parent_phone }}
                    {{ form.parent_phone.errors }}
                </div>
                <div class="form-group">
                    <label class="form-label"
                        style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-color);">Email
                        Address</label>
                    {{ form.parent_email }}
                    {{ form.parent_email.errors }}
                </div>
            </div>

            <div
                style="display: flex; gap: 1rem; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
                <button type="submit" class="btn-primary"
                    style="background-color: var(--primary-color); color: white; padding: 0.875rem 2rem; border: none; border-radius: var(--radius-md); font-weight: 600; cursor: pointer; flex: 1; transition: background 0.2s;">
                    {% if form.instance.pk %}Save Changes{% else %}Register Student{% endif %}
                </button>
                <a href="{% if form.instance.pk %}{% url 'student_detail' form.instance.pk %}{% else %}{% url 'student_list' %}{% endif %}"
                    style="padding: 0.875rem 2rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-weight: 600; text-align: center; text-decoration: none; color: var(--text-color);">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}